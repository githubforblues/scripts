# scripts
存放一些日常运维工作所需的小脚本。以下脚本主要运行在CentOS 6.5。

### rm_command.py
这是一个用Python实现的rm命令，可以替换系统中的删除命令使用。
它能够将删除的文件和目录移动到指定的隐藏文件夹中，并且禁止对根目录下的一些关键目录执行删除操作。

### tomcat_log_clean.sh
这是一个非常简单的shell脚本，能够根据文件数量，删除较旧的日志文件和备份文件。可以配合cronjob使用。

### package_get
这是一个用于获取代码包并分发到指定服务器上的脚本，用于减少代码升级更新时的手动工作量。
该脚本可以在生产环境的某台管理服务器上执行（比如prod-web0）。它会自动拉取测试服务器上已经打包好的代码（比如beta-web0上通过maven打包的war包），然后分发到指定的生产服务器上。

一些小功能说明：
1. 使用 -l 选项查看所有可以获取的war包。
2. 使用 -p PATTERN 获取匹配的war包。
3. 使用 -i 选项获取所有指定时间内打包的war包。这个时间在脚本内指定，可以使用'm'表示分钟、'h'表示小时、'd'表示天。
4. 每次获取代码包之前，都会自动对原有的包进行备份。

缺点和不足：
1. 代码包的上传和分发使用的都是单线程方式，效率较低。后续可以将其改成多线程执行。
2. 代码缺乏中断恢复机制，一旦被取消，所有的操作必须重来。建议在脚本执行时，使用临时文件记录下执行状态。被中断后可以通过某个选项，指定从上次中断状态继续执行。
3. 脚本写的比较乱，缺乏灵活性，后续想办法改进。

